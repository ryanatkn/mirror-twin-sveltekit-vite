var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,s=(e,s)=>{for(var r in s||(s={}))n.call(s,r)&&a(e,r,s[r]);if(t)for(var r of t(s))i.call(s,r)&&a(e,r,s[r]);return e};import{S as r,i as h,s as l,e as o,c,a as d,d as g,b as u,I as m,J as _,f as $,K as p,H as f,L as w,t as y,k as x,g as v,n as b,F as k,j as z,m as E,o as I,x as M,u as D,v as V,M as O,C as X,U as Y,N as j,O as A,r as P,w as L,P as T,Q as U,R as q,h as C,T as F,l as H,E as K,V as N}from"../chunks/vendor-1afcd17a.js";function R(e){let t,n,i;return{c(){t=o("div"),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0}),d(t).forEach(g),this.h()},h(){u(t,"class","handle svelte-zwbyqo"),m(t,"transform","translate3d("+e[3]+"px, "+e[4]+"px, 0)"),m(t,"width",e[2]+"px"),m(t,"height",e[2]+"px"),_(t,"hovering",e[0]),_(t,"dragging",e[1])},m(a,s){$(a,t,s),n||(i=p(t,"mousedown",e[5]),n=!0)},p(e,[n]){24&n&&m(t,"transform","translate3d("+e[3]+"px, "+e[4]+"px, 0)"),4&n&&m(t,"width",e[2]+"px"),4&n&&m(t,"height",e[2]+"px"),1&n&&_(t,"hovering",e[0]),2&n&&_(t,"dragging",e[1])},i:f,o:f,d(e){e&&g(t),n=!1,i()}}}function S(e,t,n){let i,a,{x_handle:s}=t,{y_handle:r}=t,{handles:h}=t,{start_dragging:l}=t,{hovering:o}=t,{dragging:c}=t,{size:d}=t;return e.$$set=e=>{"x_handle"in e&&n(6,s=e.x_handle),"y_handle"in e&&n(7,r=e.y_handle),"handles"in e&&n(8,h=e.handles),"start_dragging"in e&&n(9,l=e.start_dragging),"hovering"in e&&n(0,o=e.hovering),"dragging"in e&&n(1,c=e.dragging),"size"in e&&n(2,d=e.size)},e.$$.update=()=>{324&e.$$.dirty&&n(3,i=h[s]-d/2),388&e.$$.dirty&&n(4,a=h[r]-d/2)},[o,c,d,i,a,e=>{l(e,s,r)},s,r,h,l]}class W extends r{constructor(e){super(),h(this,e,S,R,l,{x_handle:6,y_handle:7,handles:8,start_dragging:9,hovering:0,dragging:1,size:2})}}function B(e){let t,n,i;return{c(){t=o("div"),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0}),d(t).forEach(g),this.h()},h(){u(t,"class","side-handle svelte-3u81yk"),u(t,"style",e[4])},m(a,s){$(a,t,s),n||(i=[p(t,"mousedown",e[9]),p(t,"mouseenter",e[10]),p(t,"mouseleave",e[11])],n=!0)},p(e,[n]){16&n&&u(t,"style",e[4])},i:f,o:f,d(e){e&&g(t),n=!1,w(i)}}}function J(e,t,n){let i,{handle:a}=t,{handles:s}=t,{size:r}=t,{container_width:h}=t,{container_height:l}=t,{start_dragging:o}=t,{hover:c}=t,{unhover:d}=t;return e.$$set=e=>{"handle"in e&&n(0,a=e.handle),"handles"in e&&n(5,s=e.handles),"size"in e&&n(6,r=e.size),"container_width"in e&&n(7,h=e.container_width),"container_height"in e&&n(8,l=e.container_height),"start_dragging"in e&&n(1,o=e.start_dragging),"hover"in e&&n(2,c=e.hover),"unhover"in e&&n(3,d=e.unhover)},e.$$.update=()=>{97&e.$$.dirty&&n(4,i=((e,t,n)=>{let i,a,s,r;switch(e){case"x1":i=n,a=t.y2-t.y1,s=t.x1-n/2,r=t.y1;break;case"x2":i=n,a=t.y2-t.y1,s=t.x2-n/2,r=t.y1;break;case"y1":i=t.x2-t.x1,a=n,s=t.x1,r=t.y1-n/2;break;case"y2":i=t.x2-t.x1,a=n,s=t.x1,r=t.y2-n/2;break;default:throw new Error(`Unknown handle ${e}`)}return`width: ${i}px; height: ${a}px; transform: translate3d(${s}px, ${r}px, 0);`})(a,s,r))},[a,o,c,d,i,s,r,h,l,e=>o(e,a),()=>c(a),()=>d(a)]}class Q extends r{constructor(e){super(),h(this,e,J,B,l,{handle:0,handles:5,size:6,container_width:7,container_height:8,start_dragging:1,hover:2,unhover:3})}}function G(e){let t,n,i;return{c(){t=o("div"),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0}),d(t).forEach(g),this.h()},h(){u(t,"class","pan-handle svelte-1s7s7yu"),u(t,"style",e[3])},m(a,s){$(a,t,s),n||(i=[p(t,"mousedown",e[5]),p(t,"mouseenter",e[6]),p(t,"mouseleave",e[7])],n=!0)},p(e,[n]){8&n&&u(t,"style",e[3])},i:f,o:f,d(e){e&&g(t),n=!1,w(i)}}}function Z(e,t,n){let i,{handles:a}=t,{start_panning:s}=t,{hover:r}=t,{unhover:h}=t;return e.$$set=e=>{"handles"in e&&n(4,a=e.handles),"start_panning"in e&&n(0,s=e.start_panning),"hover"in e&&n(1,r=e.hover),"unhover"in e&&n(2,h=e.unhover)},e.$$.update=()=>{var t;16&e.$$.dirty&&n(3,i=`width: ${(t=a).x2-t.x1}px; height: ${t.y2-t.y1}px; transform: translate3d(${t.x1}px, ${t.y1}px, 0);`)},[s,r,h,i,a,e=>s(e),()=>r(),()=>h()]}class ee extends r{constructor(e){super(),h(this,e,Z,G,l,{handles:4,start_panning:0,hover:1,unhover:2})}}function te(e){let t,n,i,a,s,r,h,l,_,z,E,I,M,D;return{c(){t=o("div"),n=o("div"),i=y("↞"),a=x(),s=o("div"),r=y("←"),h=x(),l=o("div"),_=y("→"),z=x(),E=o("div"),I=y("↠"),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0});var o=d(t);n=c(o,"DIV",{class:!0});var u=d(n);i=v(u,"↞"),u.forEach(g),a=b(o),s=c(o,"DIV",{class:!0});var m=d(s);r=v(m,"←"),m.forEach(g),h=b(o),l=c(o,"DIV",{class:!0});var $=d(l);_=v($,"→"),$.forEach(g),z=b(o),E=c(o,"DIV",{class:!0});var p=d(E);I=v(p,"↠"),p.forEach(g),o.forEach(g),this.h()},h(){u(n,"class","pan-button svelte-158tfeh"),u(s,"class","pan-button svelte-158tfeh"),u(l,"class","pan-button svelte-158tfeh"),u(E,"class","pan-button svelte-158tfeh"),u(t,"class","pan-buttons svelte-158tfeh"),m(t,"top","-60px")},m(o,c){$(o,t,c),k(t,n),k(n,i),k(t,a),k(t,s),k(s,r),k(t,h),k(t,l),k(l,_),k(t,z),k(t,E),k(E,I),M||(D=[p(window,"keydown",e[4]),p(n,"click",e[7]),p(s,"click",e[8]),p(l,"click",e[9]),p(E,"click",e[10])],M=!0)},p:f,i:f,o:f,d(e){e&&g(t),M=!1,w(D)}}}function ne(e,t,n){let{pan_left:i}=t,{pan_right:a}=t,{pan_up:s}=t,{pan_down:r}=t,{small_movement_distance:h=1}=t,{large_movement_distance:l=5}=t;const o=e=>{switch(e.key){case"ArrowLeft":return i;case"ArrowRight":return a;case"ArrowUp":return s;case"ArrowDown":return r}return null};return e.$$set=e=>{"pan_left"in e&&n(0,i=e.pan_left),"pan_right"in e&&n(1,a=e.pan_right),"pan_up"in e&&n(5,s=e.pan_up),"pan_down"in e&&n(6,r=e.pan_down),"small_movement_distance"in e&&n(2,h=e.small_movement_distance),"large_movement_distance"in e&&n(3,l=e.large_movement_distance)},[i,a,h,l,e=>{const t=o(e);if(t){t(e.ctrlKey?l:h),e.stopPropagation()}},s,r,()=>i(l),()=>i(h),()=>a(h),()=>a(l)]}class ie extends r{constructor(e){super(),h(this,e,ne,te,l,{pan_left:0,pan_right:1,pan_up:5,pan_down:6,small_movement_distance:2,large_movement_distance:3})}}function ae(e){let t,n,i,a,s,r,h,l,m,_,f,y,v,O,X,Y,j,A,P,L,T,U,q;return n=new ee({props:{handles:e[0],start_panning:e[16],hover:e[22],unhover:e[23]}}),a=new ie({props:{pan_left:e[10],pan_right:e[11],pan_up:e[12],pan_down:e[13]}}),r=new Q({props:{handle:"x1",handles:e[0],size:e[3],container_width:e[1],container_height:e[2],start_dragging:e[15],hover:e[19],unhover:e[20]}}),l=new Q({props:{handle:"x2",handles:e[0],size:e[3],container_width:e[1],container_height:e[2],start_dragging:e[15],hover:e[19],unhover:e[20]}}),_=new Q({props:{handle:"y1",handles:e[0],size:e[3],container_width:e[1],container_height:e[2],start_dragging:e[15],hover:e[19],unhover:e[20]}}),y=new Q({props:{handle:"y2",handles:e[0],size:e[3],container_width:e[1],container_height:e[2],start_dragging:e[15],hover:e[19],unhover:e[20]}}),O=new W({props:{x_handle:"x1",y_handle:"y1",handles:e[0],start_dragging:e[14],size:e[3],dragging:e[4]||"x1"===e[5]&&"y1"===e[6]||"x1"===e[7]||"y1"===e[7],hovering:e[9]||"x1"===e[8]||"y1"===e[8]}}),Y=new W({props:{x_handle:"x2",y_handle:"y1",handles:e[0],start_dragging:e[14],size:e[3],dragging:e[4]||"x2"===e[5]&&"y1"===e[6]||"x2"===e[7]||"y1"===e[7],hovering:e[9]||"x2"===e[8]||"y1"===e[8]}}),A=new W({props:{x_handle:"x1",y_handle:"y2",handles:e[0],start_dragging:e[14],size:e[3],dragging:e[4]||"x1"===e[5]&&"y2"===e[6]||"x1"===e[7]||"y2"===e[7],hovering:e[9]||"x1"===e[8]||"y2"===e[8]}}),L=new W({props:{x_handle:"x2",y_handle:"y2",handles:e[0],start_dragging:e[14],size:e[3],dragging:e[4]||"x2"===e[5]&&"y2"===e[6]||"x2"===e[7]||"y2"===e[7],hovering:e[9]||"x2"===e[8]||"y2"===e[8]}}),{c(){t=o("div"),z(n.$$.fragment),i=x(),z(a.$$.fragment),s=x(),z(r.$$.fragment),h=x(),z(l.$$.fragment),m=x(),z(_.$$.fragment),f=x(),z(y.$$.fragment),v=x(),z(O.$$.fragment),X=x(),z(Y.$$.fragment),j=x(),z(A.$$.fragment),P=x(),z(L.$$.fragment),this.h()},l(e){t=c(e,"DIV",{class:!0});var o=d(t);E(n.$$.fragment,o),i=b(o),E(a.$$.fragment,o),s=b(o),E(r.$$.fragment,o),h=b(o),E(l.$$.fragment,o),m=b(o),E(_.$$.fragment,o),f=b(o),E(y.$$.fragment,o),v=b(o),E(O.$$.fragment,o),X=b(o),E(Y.$$.fragment,o),j=b(o),E(A.$$.fragment,o),P=b(o),E(L.$$.fragment,o),o.forEach(g),this.h()},h(){u(t,"class","image-handles svelte-1f45cb4")},m(o,c){$(o,t,c),I(n,t,null),k(t,i),I(a,t,null),k(t,s),I(r,t,null),k(t,h),I(l,t,null),k(t,m),I(_,t,null),k(t,f),I(y,t,null),k(t,v),I(O,t,null),k(t,X),I(Y,t,null),k(t,j),I(A,t,null),k(t,P),I(L,t,null),T=!0,U||(q=[p(window,"mouseup",e[17]),p(window,"mousemove",e[18]),p(window,"mouseleave",e[17])],U=!0)},p(e,[t]){const i={};1&t&&(i.handles=e[0]),512&t&&(i.hover=e[22]),512&t&&(i.unhover=e[23]),n.$set(i);const a={};1&t&&(a.handles=e[0]),8&t&&(a.size=e[3]),2&t&&(a.container_width=e[1]),4&t&&(a.container_height=e[2]),r.$set(a);const s={};1&t&&(s.handles=e[0]),8&t&&(s.size=e[3]),2&t&&(s.container_width=e[1]),4&t&&(s.container_height=e[2]),l.$set(s);const h={};1&t&&(h.handles=e[0]),8&t&&(h.size=e[3]),2&t&&(h.container_width=e[1]),4&t&&(h.container_height=e[2]),_.$set(h);const o={};1&t&&(o.handles=e[0]),8&t&&(o.size=e[3]),2&t&&(o.container_width=e[1]),4&t&&(o.container_height=e[2]),y.$set(o);const c={};1&t&&(c.handles=e[0]),8&t&&(c.size=e[3]),240&t&&(c.dragging=e[4]||"x1"===e[5]&&"y1"===e[6]||"x1"===e[7]||"y1"===e[7]),768&t&&(c.hovering=e[9]||"x1"===e[8]||"y1"===e[8]),O.$set(c);const d={};1&t&&(d.handles=e[0]),8&t&&(d.size=e[3]),240&t&&(d.dragging=e[4]||"x2"===e[5]&&"y1"===e[6]||"x2"===e[7]||"y1"===e[7]),768&t&&(d.hovering=e[9]||"x2"===e[8]||"y1"===e[8]),Y.$set(d);const g={};1&t&&(g.handles=e[0]),8&t&&(g.size=e[3]),240&t&&(g.dragging=e[4]||"x1"===e[5]&&"y2"===e[6]||"x1"===e[7]||"y2"===e[7]),768&t&&(g.hovering=e[9]||"x1"===e[8]||"y2"===e[8]),A.$set(g);const u={};1&t&&(u.handles=e[0]),8&t&&(u.size=e[3]),240&t&&(u.dragging=e[4]||"x2"===e[5]&&"y2"===e[6]||"x2"===e[7]||"y2"===e[7]),768&t&&(u.hovering=e[9]||"x2"===e[8]||"y2"===e[8]),L.$set(u)},i(e){T||(M(n.$$.fragment,e),M(a.$$.fragment,e),M(r.$$.fragment,e),M(l.$$.fragment,e),M(_.$$.fragment,e),M(y.$$.fragment,e),M(O.$$.fragment,e),M(Y.$$.fragment,e),M(A.$$.fragment,e),M(L.$$.fragment,e),T=!0)},o(e){D(n.$$.fragment,e),D(a.$$.fragment,e),D(r.$$.fragment,e),D(l.$$.fragment,e),D(_.$$.fragment,e),D(y.$$.fragment,e),D(O.$$.fragment,e),D(Y.$$.fragment,e),D(A.$$.fragment,e),D(L.$$.fragment,e),T=!1},d(e){e&&g(t),V(n),V(a),V(r),V(l),V(_),V(y),V(O),V(Y),V(A),V(L),U=!1,w(q)}}}function se(e,t,n){let{handles:i}=t,{move_handles:a}=t,{container_width:s}=t,{container_height:r}=t,{size:h=40}=t,l=!1,o=!1,c=null,d=null,g=null,u=null,m=!1,_=null,$=null;const p=(e,t)=>{let n=null;e?n=t?[["x1",e],["x2",e],["y1",t],["y2",t]]:[["x1",e],["x2",e]]:t&&(n=[["y1",t],["y2",t]]),n&&a(n)};return e.$$set=e=>{"handles"in e&&n(0,i=e.handles),"move_handles"in e&&n(21,a=e.move_handles),"container_width"in e&&n(1,s=e.container_width),"container_height"in e&&n(2,r=e.container_height),"size"in e&&n(3,h=e.size)},[i,s,r,h,o,c,d,g,u,m,e=>p(-e,0),e=>p(e,0),e=>p(0,-e),e=>p(0,e),(e,t,i)=>{l=!0,n(5,c=t),n(6,d=i),_=e.clientX,$=e.clientY},(e,t)=>{l=!0,n(7,g=t),_=e.clientX,$=e.clientY},e=>{l=!0,n(4,o=!0),_=e.clientX,$=e.clientY},e=>{l&&(l=!1,n(4,o=!1),n(6,d=null),n(6,d=null),n(7,g=null),_=null,$=null)},e=>{if(l)if(o){const t=e.clientX-_,n=e.clientY-$;p(t,n),_=e.clientX,$=e.clientY}else if("x1"===g||"x2"===g){const t=e.clientX-_;a([[g,t]]),_=e.clientX}else if("y1"===g||"y2"===g){const t=e.clientY-$;a([[g,t]]),$=e.clientY}else{const t=e.clientX-_,n=e.clientY-$;a([[c,t],[d,n]]),_=e.clientX,$=e.clientY}},e=>{n(8,u=e)},e=>{n(8,u=null)},a,()=>n(9,m=!0),()=>n(9,m=!1)]}class re extends r{constructor(e){super(),h(this,e,se,ae,l,{handles:0,move_handles:21,container_width:1,container_height:2,size:3})}}function he(e,t,n){const i=e.slice();return i[9]=t[n],i}function le(e){let t;return{c(){t=o("div"),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0}),d(t).forEach(g),this.h()},h(){u(t,"class","bg-rect svelte-1q7iaud"),m(t,"left",e[9].left+"px"),m(t,"top",e[9].top+"px"),m(t,"width",e[9].width+"px"),m(t,"height",e[9].height+"px")},m(e,n){$(e,t,n)},p(e,n){256&n&&m(t,"left",e[9].left+"px"),256&n&&m(t,"top",e[9].top+"px"),256&n&&m(t,"width",e[9].width+"px"),256&n&&m(t,"height",e[9].height+"px")},d(e){e&&g(t)}}}function oe(e){let t,n,i,a,s,r,h=e[8],l=[];for(let o=0;o<h.length;o+=1)l[o]=le(he(e,h,o));return s=new re({props:{handles:e[6],move_handles:e[7],container_width:e[1],container_height:e[2]}}),{c(){t=o("div"),n=o("div"),i=x();for(let e=0;e<l.length;e+=1)l[e].c();a=x(),z(s.$$.fragment),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0});var r=d(t);n=c(r,"DIV",{class:!0,style:!0}),d(n).forEach(g),i=b(r);for(let t=0;t<l.length;t+=1)l[t].l(r);a=b(r),E(s.$$.fragment,r),r.forEach(g),this.h()},h(){u(n,"class","image svelte-1q7iaud"),m(n,"width",e[0].width+"px"),m(n,"height",e[0].height+"px"),m(n,"background-image","url("+e[0].url+")"),m(n,"transform","scale3d("+e[3]+", "+e[3]+", 1)"),u(t,"class","source-image svelte-1q7iaud"),m(t,"width",e[1]+"px"),m(t,"height",e[2]+"px"),m(t,"left",e[4]+"px"),m(t,"top",e[5]+"px")},m(e,h){$(e,t,h),k(t,n),k(t,i);for(let n=0;n<l.length;n+=1)l[n].m(t,null);k(t,a),I(s,t,null),r=!0},p(e,[i]){if((!r||1&i)&&m(n,"width",e[0].width+"px"),(!r||1&i)&&m(n,"height",e[0].height+"px"),(!r||1&i)&&m(n,"background-image","url("+e[0].url+")"),(!r||8&i)&&m(n,"transform","scale3d("+e[3]+", "+e[3]+", 1)"),256&i){let n;for(h=e[8],n=0;n<h.length;n+=1){const s=he(e,h,n);l[n]?l[n].p(s,i):(l[n]=le(s),l[n].c(),l[n].m(t,a))}for(;n<l.length;n+=1)l[n].d(1);l.length=h.length}const o={};64&i&&(o.handles=e[6]),128&i&&(o.move_handles=e[7]),2&i&&(o.container_width=e[1]),4&i&&(o.container_height=e[2]),s.$set(o),(!r||2&i)&&m(t,"width",e[1]+"px"),(!r||4&i)&&m(t,"height",e[2]+"px"),(!r||16&i)&&m(t,"left",e[4]+"px"),(!r||32&i)&&m(t,"top",e[5]+"px")},i(e){r||(M(s.$$.fragment,e),r=!0)},o(e){D(s.$$.fragment,e),r=!1},d(e){e&&g(t),O(l,e),V(s)}}}function ce(e,t,n){let i,{image:a}=t,{width:s}=t,{height:r}=t,{scale:h}=t,{left:l}=t,{top:o}=t,{handles:c}=t,{move_handles:d}=t;return e.$$set=e=>{"image"in e&&n(0,a=e.image),"width"in e&&n(1,s=e.width),"height"in e&&n(2,r=e.height),"scale"in e&&n(3,h=e.scale),"left"in e&&n(4,l=e.left),"top"in e&&n(5,o=e.top),"handles"in e&&n(6,c=e.handles),"move_handles"in e&&n(7,d=e.move_handles)},e.$$.update=()=>{70&e.$$.dirty&&n(8,i=[{left:0,top:0,width:c.x1,height:r},{left:c.x2,top:0,width:s-c.x2,height:r},{left:c.x1,top:0,width:c.x2-c.x1,height:c.y1},{left:c.x1,top:c.y2,width:c.x2-c.x1,height:r-c.y2}])},[a,s,r,h,l,o,c,d,i]}class de extends r{constructor(e){super(),h(this,e,ce,oe,l,{image:0,width:1,height:2,scale:3,left:4,top:5,handles:6,move_handles:7})}}function ge(e){let t,n,i,a;return{c(){t=o("div"),n=o("div"),i=x(),a=o("div"),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0});var s=d(t);n=c(s,"DIV",{style:!0}),d(n).forEach(g),i=b(s),a=c(s,"DIV",{style:!0}),d(a).forEach(g),s.forEach(g),this.h()},h(){u(n,"style",e[1]),u(a,"style",e[2]),u(t,"class","mirror-image svelte-1xd7821"),u(t,"style",e[0])},m(e,s){$(e,t,s),k(t,n),k(t,i),k(t,a)},p(e,[i]){2&i&&u(n,"style",e[1]),4&i&&u(a,"style",e[2]),1&i&&u(t,"style",e[0])},i:f,o:f,d(e){e&&g(t)}}}function ue(e,t,n){let i,a,s,{image:r}=t,{selection_x:h}=t,{selection_y:l}=t,{selection_width:o}=t,{selection_height:c}=t,{is_left:d}=t;const g=(e,t,n,i,a,s,r)=>{let h,l;return e?(h=t?"":"transform: rotate3d(0, 1, 0, 180deg);",l=t?`background-position: ${n.width-i}px ${-a}px;`:`background-position: ${n.width-i-s/2}px ${-a}px;`):(h=t?"transform: rotate3d(0, 1, 0, 180deg);":"",l=t?`background-position: ${n.width-i}px ${-a}px;`:`background-position: ${n.width-i-s/2}px ${-a}px;`),`width: ${s/2}px; height: ${r}px; background-image: url(${n.url}); ${l} ${h}`};return e.$$set=e=>{"image"in e&&n(3,r=e.image),"selection_x"in e&&n(4,h=e.selection_x),"selection_y"in e&&n(5,l=e.selection_y),"selection_width"in e&&n(6,o=e.selection_width),"selection_height"in e&&n(7,c=e.selection_height),"is_left"in e&&n(8,d=e.is_left)},e.$$.update=()=>{192&e.$$.dirty&&n(0,i=`width: ${o}px; height: ${c}px;`),504&e.$$.dirty&&n(1,a=g(!0,d,r,h,l,o,c)),504&e.$$.dirty&&n(2,s=g(!1,d,r,h,l,o,c))},[i,a,s,r,h,l,o,c,d]}class me extends r{constructor(e){super(),h(this,e,ue,ge,l,{image:3,selection_x:4,selection_y:5,selection_width:6,selection_height:7,is_left:8})}}function _e(e){let t,n,i,a,s;return n=new me({props:{image:e[0],selection_x:e[1],selection_y:e[2],selection_width:e[3],selection_height:e[4],is_left:!0}}),a=new me({props:{image:e[0],selection_x:e[1],selection_y:e[2],selection_width:e[3],selection_height:e[4],is_left:!1}}),{c(){t=o("div"),z(n.$$.fragment),i=x(),z(a.$$.fragment),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0});var s=d(t);E(n.$$.fragment,s),i=b(s),E(a.$$.fragment,s),s.forEach(g),this.h()},h(){u(t,"class","mirror-images svelte-1p0b9ky"),u(t,"style",e[5])},m(e,r){$(e,t,r),I(n,t,null),k(t,i),I(a,t,null),s=!0},p(e,[i]){const r={};1&i&&(r.image=e[0]),2&i&&(r.selection_x=e[1]),4&i&&(r.selection_y=e[2]),8&i&&(r.selection_width=e[3]),16&i&&(r.selection_height=e[4]),n.$set(r);const h={};1&i&&(h.image=e[0]),2&i&&(h.selection_x=e[1]),4&i&&(h.selection_y=e[2]),8&i&&(h.selection_width=e[3]),16&i&&(h.selection_height=e[4]),a.$set(h),(!s||32&i)&&u(t,"style",e[5])},i(e){s||(M(n.$$.fragment,e),M(a.$$.fragment,e),s=!0)},o(e){D(n.$$.fragment,e),D(a.$$.fragment,e),s=!1},d(e){e&&g(t),V(n),V(a)}}}function $e(e,t,n){let i,{image:a}=t,{container_width:s}=t,{selection_x:r}=t,{selection_y:h}=t,{selection_width:l}=t,{selection_height:o}=t,{rendered_width:c}=t,{rendered_height:d}=t,{scale:g}=t;return e.$$set=e=>{"image"in e&&n(0,a=e.image),"container_width"in e&&n(6,s=e.container_width),"selection_x"in e&&n(1,r=e.selection_x),"selection_y"in e&&n(2,h=e.selection_y),"selection_width"in e&&n(3,l=e.selection_width),"selection_height"in e&&n(4,o=e.selection_height),"rendered_width"in e&&n(7,c=e.rendered_width),"rendered_height"in e&&n(8,d=e.rendered_height),"scale"in e&&n(9,g=e.scale)},e.$$.update=()=>{728&e.$$.dirty&&n(5,i=`left: ${Math.floor(s/2-c)}px; transform: scale3d(${g}, ${g}, 1); width: ${2*l}px; height: ${o}px;`)},[a,r,h,l,o,i,s,c,d,g]}class pe extends r{constructor(e){super(),h(this,e,$e,_e,l,{image:0,container_width:6,selection_x:1,selection_y:2,selection_width:3,selection_height:4,rendered_width:7,rendered_height:8,scale:9})}}function fe(e){let t,n,i,a,s,r,h;return i=new de({props:{image:e[5],handles:e[6],move_handles:e[7],width:e[2].width,height:e[2].height,scale:e[2].scale,left:e[2].x1,top:e[2].y1}}),r=new pe({props:{image:e[5],container_width:e[1].mirror_container_width,selection_x:e[3].x1,selection_y:e[3].y1,selection_width:e[3].width,selection_height:e[3].height,rendered_width:e[4].image_width,rendered_height:e[4].image_height,scale:e[4].scale}}),{c(){t=o("div"),n=o("div"),z(i.$$.fragment),a=x(),s=o("div"),z(r.$$.fragment),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0});var h=d(t);n=c(h,"DIV",{class:!0,style:!0});var l=d(n);E(i.$$.fragment,l),l.forEach(g),a=b(h),s=c(h,"DIV",{class:!0,style:!0});var o=d(s);E(r.$$.fragment,o),o.forEach(g),h.forEach(g),this.h()},h(){u(n,"class","source-image-wrapper svelte-1rnm3iy"),m(n,"height",e[1].source_container_height+"px"),u(s,"class","mirror-images-wrapper svelte-1rnm3iy"),m(s,"height",e[1].mirror_container_height+"px"),u(t,"class","mirror-twin-images svelte-1rnm3iy"),m(t,"height",e[0]+"px")},m(e,l){$(e,t,l),k(t,n),I(i,n,null),k(t,a),k(t,s),I(r,s,null),h=!0},p(e,[a]){const l={};32&a&&(l.image=e[5]),64&a&&(l.handles=e[6]),128&a&&(l.move_handles=e[7]),4&a&&(l.width=e[2].width),4&a&&(l.height=e[2].height),4&a&&(l.scale=e[2].scale),4&a&&(l.left=e[2].x1),4&a&&(l.top=e[2].y1),i.$set(l),(!h||2&a)&&m(n,"height",e[1].source_container_height+"px");const o={};32&a&&(o.image=e[5]),2&a&&(o.container_width=e[1].mirror_container_width),8&a&&(o.selection_x=e[3].x1),8&a&&(o.selection_y=e[3].y1),8&a&&(o.selection_width=e[3].width),8&a&&(o.selection_height=e[3].height),16&a&&(o.rendered_width=e[4].image_width),16&a&&(o.rendered_height=e[4].image_height),16&a&&(o.scale=e[4].scale),r.$set(o),(!h||2&a)&&m(s,"height",e[1].mirror_container_height+"px"),(!h||1&a)&&m(t,"height",e[0]+"px")},i(e){h||(M(i.$$.fragment,e),M(r.$$.fragment,e),h=!0)},o(e){D(i.$$.fragment,e),D(r.$$.fragment,e),h=!1},d(e){e&&g(t),V(i),V(r)}}}function we(e,t,n){let{height:i}=t,{layout:a}=t,{source_image_layout:s}=t,{source_image_selection:r}=t,{mirror_images_layout:h}=t,{image:l}=t,{handles:o}=t,{move_handles:c}=t;return e.$$set=e=>{"height"in e&&n(0,i=e.height),"layout"in e&&n(1,a=e.layout),"source_image_layout"in e&&n(2,s=e.source_image_layout),"source_image_selection"in e&&n(3,r=e.source_image_selection),"mirror_images_layout"in e&&n(4,h=e.mirror_images_layout),"image"in e&&n(5,l=e.image),"handles"in e&&n(6,o=e.handles),"move_handles"in e&&n(7,c=e.move_handles)},[i,a,s,r,h,l,o,c]}class ye extends r{constructor(e){super(),h(this,e,we,fe,l,{height:0,layout:1,source_image_layout:2,source_image_selection:3,mirror_images_layout:4,image:5,handles:6,move_handles:7})}}const xe=(e,t,n)=>{if(null===e.width)throw Error(`Cannot compute layout with unloaded image data: ${e.name}`);const i=e.width,a=e.height,s=t,r=Math.round(.5*n);return{width:t,height:n,image_width:i,image_height:a,source_container_width:s,source_container_height:r,mirror_container_width:t,mirror_container_height:n-r}},ve=(e,t)=>({name:e,url:t,el:null,width:null,height:null}),be=[ve("Ada Lovelace","images/ada_lovelace.png"),ve("Alan Turing","images/alan_turing.jpg"),ve("Frida Kahlo","images/frida_kahlo.jpg"),ve("custom image url","")];function ke(e,t,n){const i=e.slice();return i[6]=t[n],i}function ze(e){let t,n=e[6].name+"";return{c(){t=y(n)},l(e){t=v(e,n)},m(e,n){$(e,t,n)},p(e,i){32&i&&n!==(n=e[6].name+"")&&C(t,n)},d(e){e&&g(t)}}}function Ee(e){let t,n,i,a;function s(...t){return e[24](e[6],...t)}return{c(){t=o("input"),this.h()},l(e){t=c(e,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){u(t,"class","url svelte-4hm7a9"),u(t,"type","text"),u(t,"placeholder",n=e[6].name)},m(n,r){$(n,t,r),i||(a=[p(t,"input",s),p(t,"focus",e[25])],i=!0)},p(i,a){e=i,32&a&&n!==(n=e[6].name)&&u(t,"placeholder",n)},d(e){e&&g(t),i=!1,w(a)}}}function Ie(e,t){let n,i,a,s,r;function h(e,t){return"custom image url"===e[6].name?Ee:ze}let l=h(t),m=l(t);return{key:e,first:null,c(){n=o("label"),i=o("input"),m.c(),this.h()},l(e){n=c(e,"LABEL",{class:!0});var t=d(n);i=c(t,"INPUT",{type:!0}),m.l(t),t.forEach(g),this.h()},h(){u(i,"type","radio"),i.__value=a=t[6].name,i.value=i.__value,t[23][0].push(i),u(n,"class","control svelte-4hm7a9"),_(n,"selected",t[6].name===t[3]),this.first=n},m(e,a){$(e,n,a),k(n,i),i.checked=i.__value===t[3],m.m(n,null),s||(r=p(i,"change",t[22]),s=!0)},p(e,s){t=e,32&s&&a!==(a=t[6].name)&&(i.__value=a,i.value=i.__value),8&s&&(i.checked=i.__value===t[3]),l===(l=h(t))&&m?m.p(t,s):(m.d(1),m=l(t),m&&(m.c(),m.m(n,null))),40&s&&_(n,"selected",t[6].name===t[3])},d(e){e&&g(n),t[23][0].splice(t[23][0].indexOf(i),1),m.d(),s=!1,r()}}}function Me(e){let t,n;return t=new ye({props:{image:e[6],height:e[4],layout:e[7],handles:e[11],source_image_layout:e[8],source_image_selection:e[9],mirror_images_layout:e[10],move_handles:e[14].move}}),{c(){z(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){I(t,e,i),n=!0},p(e,n){const i={};64&n&&(i.image=e[6]),16&n&&(i.height=e[4]),128&n&&(i.layout=e[7]),2048&n&&(i.handles=e[11]),256&n&&(i.source_image_layout=e[8]),512&n&&(i.source_image_selection=e[9]),1024&n&&(i.mirror_images_layout=e[10]),t.$set(i)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function De(e){let t,n,i,a,s,r=[],h=new Map,l=e[5];const _=e=>e[6].name;for(let o=0;o<l.length;o+=1){let t=ke(e,l,o),n=_(t);h.set(n,r[o]=Ie(n,t))}let p=e[7]&&e[6]&&e[8]&&e[9]&&e[10]&&Me(e);return{c(){t=o("div"),n=o("div"),i=o("form");for(let e=0;e<r.length;e+=1)r[e].c();a=x(),p&&p.c(),this.h()},l(e){t=c(e,"DIV",{class:!0,style:!0});var s=d(t);n=c(s,"DIV",{class:!0,style:!0});var h=d(n);i=c(h,"FORM",{class:!0});var l=d(i);for(let t=0;t<r.length;t+=1)r[t].l(l);l.forEach(g),h.forEach(g),a=b(s),p&&p.l(s),s.forEach(g),this.h()},h(){u(i,"class","svelte-4hm7a9"),u(n,"class","controls svelte-4hm7a9"),m(n,"height",Ve+"px"),u(t,"class","mirror-twins svelte-4hm7a9"),m(t,"height",e[1]+"px"),m(t,"width",e[0]+"px")},m(e,h){$(e,t,h),k(t,n),k(n,i);for(let t=0;t<r.length;t+=1)r[t].m(i,null);k(t,a),p&&p.m(t,null),s=!0},p(e,[n]){44&n&&(l=e[5],r=A(r,n,_,1,e,l,h,i,q,Ie,null,ke)),e[7]&&e[6]&&e[8]&&e[9]&&e[10]?p?(p.p(e,n),1984&n&&M(p,1)):(p=Me(e),p.c(),M(p,1),p.m(t,null)):p&&(P(),D(p,1,1,(()=>{p=null})),L()),(!s||2&n)&&m(t,"height",e[1]+"px"),(!s||1&n)&&m(t,"width",e[0]+"px")},i(e){s||(M(p),s=!0)},o(e){D(p),s=!1},d(e){e&&g(t);for(let t=0;t<r.length;t+=1)r[t].d();p&&p.d()}}}const Ve=130;function Oe(e,t,n){let i,a,r,h,l,o,c,d,g,u,m,_,$,p=f,w=()=>(p(),p=T(v,(e=>n(5,d=e))),v);e.$$.on_destroy.push((()=>p()));let{width:y}=t,{height:x}=t,{images:v}=t;w();let b=d[2].name;const k=(()=>{const{subscribe:e,set:t}=X(null);return{subscribe:e,compute:(e,n,i)=>{const a=xe(e,n,i);t(a)}}})();U(e,k,(e=>n(18,g=e)));const z=(e=>{const{subscribe:t}=j(e,(e=>{if(!e)return null;const t=e.source_container_width-20-20,n=e.source_container_height-60-0,i=Math.min(1,t/e.image_width,n/e.image_height),a=Math.floor(e.image_width*i),s=Math.floor(e.image_height*i),r=Math.floor(e.source_container_width/2-a/2+0),h=r+a,l=e.source_container_height-s;return{scale:i,width:a,height:s,x1:r,x2:h,y1:l,y2:l+s}}));return{subscribe:t}})(k);U(e,z,(e=>n(19,u=e)));const E=(e=>{let t,n,i,a;const{subscribe:r}=j(e,((e,s)=>{t=s,n=e.width,i=e.height,a={width:e.width,height:e.height,x1:0,x2:e.width,y1:0,y2:e.height},s(a)}),void 0);return{subscribe:r,move:e=>{const r=s({},a);for(const[t,a]of e)switch(t){case"x1":r.x1=Math.min(Math.max(r.x1+a,0),r.x2);break;case"x2":r.x2=Math.max(Math.min(r.x2+a,n),r.x1);break;case"y1":r.y1=Math.min(Math.max(r.y1+a,0),r.y2);break;case"y2":r.y2=Math.max(Math.min(r.y2+a,i),r.y1);break;default:throw new Y(t)}r.width=r.x2-r.x1,r.height=r.y2-r.y1,a=r,t(r)}}})(j(z,(e=>({width:e&&e.width||0,height:e&&e.height||0}))));U(e,E,(e=>n(11,$=e)));const I=((e,t)=>{const{subscribe:n}=j([e,t],(([e,t])=>{if(!e)return null;const{scale:n}=e,i=Math.round(t.x1/n),a=Math.round(t.x2/n),s=Math.round(t.y1/n),r=Math.round(t.y2/n);return{width:a-i,height:r-s,x1:i,x2:a,y1:s,y2:r}}));return{subscribe:n}})(z,E);U(e,I,(e=>n(20,m=e)));const M=((e,t,n)=>{const{subscribe:i}=j([e,t,n],(([e,t,n])=>{if(!e||!t||!n)return null;const i=Math.min(1,e.mirror_container_width/2/n.width,e.mirror_container_height/n.height),a=Math.floor(n.width*i);return{scale:i,image_height:Math.floor(n.height*i),image_width:a}}));return{subscribe:i}})(k,z,I);U(e,M,(e=>n(21,_=e)));return e.$$set=e=>{"width"in e&&n(0,y=e.width),"height"in e&&n(1,x=e.height),"images"in e&&w(n(2,v=e.images))},e.$$.update=()=>{2&e.$$.dirty&&n(4,i=x-Ve),44&e.$$.dirty&&n(6,a=d&&v.find_by_name(b)),12&e.$$.dirty&&v.load(b),64&e.$$.dirty&&n(17,r=!(!a||null===a.width)),131153&e.$$.dirty&&r&&k.compute(a,y,i),262144&e.$$.dirty&&n(7,h=g),524288&e.$$.dirty&&n(8,l=u),1048576&e.$$.dirty&&n(9,o=m),2097152&e.$$.dirty&&n(10,c=_)},[y,x,v,b,i,d,a,h,l,o,c,$,k,z,E,I,M,r,g,u,m,_,function(){b=this.__value,n(3,b)},[[]],(e,t)=>v.update_one(e.name,{url:t.currentTarget.value}),()=>{"custom image url"!==b&&n(3,b="custom image url")}]}class Xe extends r{constructor(e){super(),h(this,e,Oe,De,l,{width:0,height:1,images:2})}}const{window:Ye}=N;function je(e){let t,n,i,a,s,r;F(e[4]),document.title=t=e[0];let h=function(e){let t,n;return t=new Xe({props:{images:e[3],width:e[1],height:e[2]}}),{c(){z(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,i){I(t,e,i),n=!0},p(e,n){const i={};2&n&&(i.width=e[1]),4&n&&(i.height=e[2]),t.$set(i)},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}(e);return{c(){n=x(),h&&h.c(),i=H()},l(e){K('[data-svelte="svelte-1sv3h"]',document.head).forEach(g),n=b(e),h&&h.l(e),i=H()},m(t,l){$(t,n,l),h&&h.m(t,l),$(t,i,l),a=!0,s||(r=p(Ye,"resize",e[4]),s=!0)},p(e,[n]){(!a||1&n)&&t!==(t=e[0])&&(document.title=t),h.p(e,n)},i(e){a||(M(h),a=!0)},o(e){D(h),a=!1},d(e){e&&g(n),h&&h.d(e),e&&g(i),s=!1,r()}}}function Ae(e,t,n){let{name:i="mirror-twin-sveltekit-vite"}=t;const a=(e=>{const{subscribe:t,update:n}=X(e);let i;t((e=>{i=e}));const a=e=>i.find((t=>t.name===e)),r=(e,t)=>{n((n=>n.map((n=>n.name===e?s(s({},n),t):n))))};return{subscribe:t,update_one:r,find_by_name:a,load:e=>{const t=a(e);if(!t)throw Error(`Cannot find image with name ${e}`);if(t.el)return t;const n="undefined"==typeof window?{}:new Image;return r(e,{el:n}),n.src=t.url,n.onload=()=>{r(e,{width:n.width,height:n.height})},t}}})(be);let r="undefined"==typeof window?0:window.innerWidth,h="undefined"==typeof window?0:window.innerHeight;return e.$$set=e=>{"name"in e&&n(0,i=e.name)},[i,r,h,a,function(){n(2,h=Ye.innerHeight),n(1,r=Ye.innerWidth)}]}export default class extends r{constructor(e){super(),h(this,e,Ae,je,l,{name:0})}}
